@using Microsoft.AspNet.Identity;
@{
    ViewBag.Title = "Home Page";
    if (Request.IsAuthenticated)
    {
        ViewBag.Msg = $"Hello {User.Identity.GetUserName()}!";
    }
}

@if (!Request.IsAuthenticated)
{
    @Html.Partial("_ExternalLoginPartial", new RuuviTagApp.Models.ExternalLoginListViewModel())
}

@{ 
    RuuviTagApp.ViewModels.MacAddressModel mac = 
        Model is RuuviTagApp.ViewModels.MacAddressModel ? 
        Model : new RuuviTagApp.ViewModels.MacAddressModel(); 
}
@Html.Partial("MacAddress", mac)

@if (!Request.IsAuthenticated)
{
    RuuviTagApp.Models.ExternalLoginConfirmationViewModel ext = 
        Model is RuuviTagApp.Models.ExternalLoginConfirmationViewModel ? 
        Model : new RuuviTagApp.Models.ExternalLoginConfirmationViewModel();
    @Html.Partial("~/Views/Account/ExternalLoginConfirmation.cshtml", ext);
}
@section scripts{
    <script type="text/javascript">
        $(window).on('load', function () {
            var renderRegisterModal = @((ViewBag.RenderRegisterModal ?? false).ToString().ToLower());
            if (renderRegisterModal) {
                $('#externalRegisterModal').modal('show');
            }
        });
    </script>
}